<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Correlation Explorer</title>
<script src="../lib/chart.min.js"></script>
<link rel="stylesheet" href="../css/styles.css">
<style>
body {
  font-family: Arial, sans-serif;
  margin:0;
  padding:20px;
}
.control-panel {
  display:flex;
  justify-content:center;
  gap:40px;
  flex-wrap:wrap;
  margin-bottom:20px;
}
.slider-container { text-align:center; }
/*.Layout helpers for each concept block*/
.concept-section {
  margin-top:30px;
  text-align:center;
}
.section-content {
  display:flex;
  justify-content:center;
  align-items:flex-start;
  gap:30px;
  flex-wrap:wrap;
}
.concept-section canvas {
  max-width:400px;
  max-height:400px;
}
.text-panel {
  max-width:320px;
  text-align:left;
}
.equation {
  font-family:'Times New Roman',serif;
  font-size:1.1em;
}
.steps {
  margin-top:10px;
  padding-left:20px;
}
.result {
  font-weight:bold;
  margin-top:10px;
}
.pair-canvases {
  display:flex;
  justify-content:center;
  gap:20px;
  flex-wrap:wrap;
}
</style>
</head>
<body>
<h1>Correlation Explorer</h1>

<p>This page shows how several familiar similarity measures are all built from
the inner product (⟨A,B⟩). By adjusting the vectors below, you can see how each
variation—normalization or centering—transforms the same underlying calculation.</p>

<div class="control-panel">
  <div class="slider-container">
     <label for="vectorAX1">Vector A (A₁, A₂):</label><br>
     <input type="range" id="vectorAX1" min="-10" max="10" value="0">
     <input type="range" id="vectorAY1" min="-10" max="10" value="0">
     <span id="vectorAOutput">(0, 0)</span>
  </div>
  <div class="slider-container">
     <label for="vectorBX1">Vector B (B₁, B₂):</label><br>
     <input type="range" id="vectorBX1" min="-10" max="10" value="0">
     <input type="range" id="vectorBY1" min="-10" max="10" value="0">
     <span id="vectorBOutput">(0, 0)</span>
  </div>
</div>

<section id="dotProductSection" class="concept-section">
  <h2>Dot Product</h2>
  <div class="section-content">
    <canvas id="dotProductChart"></canvas>
    <div class="text-panel">
      <p>The raw inner product.</p>
      <p class="equation">⟨A,B⟩ = A<sub>1</sub>B<sub>1</sub> + A<sub>2</sub>B<sub>2</sub></p>
      <ol id="dotProductSteps" class="steps"></ol>
      <p class="result">Dot Product: <span id="dotProductValue">-</span></p>
    </div>
  </div>
</section>

<section id="cosineSection" class="concept-section">
  <h2>Cosine Similarity</h2>
  <div class="section-content">
    <canvas id="cosineChart"></canvas>
    <div class="text-panel">
      <p>A dot product of normalized vectors.</p>
      <p class="equation">cos θ = ⟨Â, B̂⟩ = ⟨A,B⟩ /(‖A‖‖B‖)</p>
      <ol id="cosineSteps" class="steps"></ol>
      <p class="result">Cosine Similarity: <span id="cosineSimilarityValue">-</span></p>
    </div>
  </div>
</section>

<section id="pearsonSection" class="concept-section">
  <h2>Pearson Correlation</h2>
  <div class="section-content">
    <div class="pair-canvases">
      <div>
        <p><em>Before Centering</em></p>
        <canvas id="pearsonBeforeChart"></canvas>
      </div>
      <div>
        <p><em>After Centering</em></p>
        <canvas id="pearsonCenteredChart"></canvas>
      </div>
      <div>
        <p><em>Centered &amp; Normalized</em></p>
        <canvas id="pearsonNormChart"></canvas>
      </div>
    </div>
    <div class="text-panel">
      <p>The cosine similarity of centered and normalized vectors.</p>
      <p class="equation">r = ⟨A - Ā, B - B̄⟩ /(‖A - Ā‖‖B - B̄‖)</p>
      <ol id="pearsonSteps" class="steps"></ol>
      <p class="result">Pearson Correlation: <span id="pearsonCorrelationValue">-</span></p>
    </div>
  </div>
</section>

<section id="olsSection" class="concept-section">
  <h2>OLS Regression Coefficient</h2>
  <div class="section-content">
    <canvas id="olsChart"></canvas>
    <div class="text-panel">
      <p>Scatter the points (A<sub>i</sub>,B<sub>i</sub>) and fit the best line through the origin.</p>
      <p class="equation">a = ⟨A,B⟩ / ‖A‖<sup>2</sup> = ΣA<sub>i</sub>B<sub>i</sub> / ΣA<sub>i</sub><sup>2</sup></p>
      <ol id="olsSteps" class="steps"></ol>
      <p class="result">OLS Coefficient: <span id="olsCoefficientValue">-</span></p>
    </div>
  </div>
</section>

<section class="concept-section">
  <h2>Summary</h2>
  <table style="margin:0 auto;">
    <tr><th>Measure</th><th>Centering</th><th>Normalization</th></tr>
    <tr><td>Dot Product</td><td>No</td><td>None</td></tr>
    <tr><td>Cosine Similarity</td><td>No</td><td>Both vectors</td></tr>
    <tr><td>Pearson Correlation</td><td>Both vectors</td><td>Both vectors</td></tr>
    <tr><td>OLS Coefficient</td><td>No</td><td>Vector A only</td></tr>
  </table>
</section>

<script src="../javascript/common.js"></script>
<script src="../javascript/correlation.js"></script>
</body>
</html>
